{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\nconst initialState = {\n  streamers: [],\n  streamer: null,\n  isLoading: false,\n  error: null\n};\nconst backendURL = 'http://localhost:3001';\nexport const fetchSteamers = createAsyncThunk('streamer/fetchSteamers', async () => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  };\n  const res = await axios(`${backendURL}/api/streamers`, config);\n  const data = await res.data;\n  return data;\n});\nexport const fetchStreamer = createAsyncThunk('streamer/fetchStreamer', async _ref => {\n  let {\n    id\n  } = _ref;\n  const res = await axios(`${backendURL}/api/streamer/${id}`);\n  const data = await res.data;\n  return data;\n});\nexport const addStreamer = createAsyncThunk('streamer/addStreamer', async (_ref2, _ref3) => {\n  let {\n    name,\n    platform,\n    description\n  } = _ref2;\n  let {\n    getState,\n    rejectWithValue\n  } = _ref3;\n  try {\n    const state = getState();\n    const token = state.auth.token;\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Authorization': \"Bearer \" + token\n      }\n    };\n    const {\n      data\n    } = await axios.post(`${backendURL}/api/streamers`, {\n      name,\n      platform,\n      description\n    }, config);\n    return data;\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});\nexport const voteSteamer = createAsyncThunk('streamer/vote', async (_ref4, _ref5) => {\n  let {\n    id,\n    vote\n  } = _ref4;\n  let {\n    getState,\n    rejectWithValue\n  } = _ref5;\n  try {\n    const state = getState();\n    const token = state.auth.token;\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Authorization': \"Bearer \" + token\n      }\n    };\n    const {\n      data\n    } = await axios.post(`${backendURL}/api/comment/${id}/vote`, {\n      vote\n    }, config);\n    return data;\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});\nexport const postSlice = createSlice({\n  name: 'post',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchSteamers.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(fetchSteamers.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.streamers = action.payload.data;\n    });\n    builder.addCase(fetchSteamers.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload.error.message;\n    });\n    builder.addCase(fetchStreamer.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(fetchStreamer.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.streamer = action.payload.data;\n    });\n    builder.addCase(fetchStreamer.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload.error.message;\n    });\n    builder.addCase(addStreamer.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(addStreamer.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.streamers.push(action.payload.data);\n    });\n    builder.addCase(addStreamer.rejected, (state, action) => {\n      state.isLoading = false;\n      console.log(action);\n      state.error = action.error.message;\n    });\n    builder.addCase(voteSteamer.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(voteSteamer.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.streamer = action.payload.data;\n      state.streamers.map(el => el._id === action.payload.data._id ? action.payload.data : el);\n    });\n    builder.addCase(voteSteamer.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload.error.message;\n    });\n  }\n});\nexport default postSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","useSelector","initialState","streamers","streamer","isLoading","error","backendURL","fetchSteamers","config","headers","res","data","fetchStreamer","_ref","id","addStreamer","_ref2","_ref3","name","platform","description","getState","rejectWithValue","state","token","auth","post","response","message","voteSteamer","_ref4","_ref5","vote","postSlice","reducers","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","push","console","log","map","el","_id","reducer"],"sources":["/Users/albert/Desktop/frontend-steamers/src/redux/slice/streamerSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\nimport axios from 'axios'\nimport { useSelector } from 'react-redux'\n\nconst initialState = {\n  streamers: [],\n  streamer: null,\n  isLoading: false,\n  error: null,\n}\n\nconst backendURL = 'http://localhost:3001'\n\nexport const fetchSteamers = createAsyncThunk(\n  'streamer/fetchSteamers',\n  async () => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    };\n    const res = await axios(`${backendURL}/api/streamers`, config);\n    const data = await res.data;\n    return data;\n  }\n)\n\nexport const fetchStreamer = createAsyncThunk(\n  'streamer/fetchStreamer',\n  async ({ id }) => {\n    const res = await axios(`${backendURL}/api/streamer/${id}`);\n    const data = await res.data;\n    return data;\n  }\n)\n\nexport const addStreamer = createAsyncThunk(\n  'streamer/addStreamer',\n  async ({ name, platform ,description }, { getState, rejectWithValue }) => {\n    try {\n      const state = getState();\n      const token = state.auth.token;\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Authorization': \"Bearer \" + token\n        },\n      };\n      const { data } = await axios.post(\n        `${backendURL}/api/streamers`,\n        { name, platform, description },\n        config\n      );\n      return data;\n    } catch (error) {\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message)\n      } else {\n        return rejectWithValue(error.message)\n      }\n    }\n  }\n)\n\nexport const voteSteamer = createAsyncThunk(\n  'streamer/vote',\n  async ({ id, vote }, { getState, rejectWithValue }) => {\n    try {\n      const state = getState();\n      const token = state.auth.token;\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Authorization': \"Bearer \" + token\n        },\n      };\n      const { data } = await axios.post(\n        `${backendURL}/api/comment/${id}/vote`,\n        { vote },\n        config\n      );\n      return data;\n    } catch (error) {\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message)\n      } else {\n        return rejectWithValue(error.message)\n      }\n    }\n  }\n)\n\nexport const postSlice = createSlice({\n  name: 'post',\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetchSteamers.pending, (state) => {\n      state.isLoading = true\n    })\n    builder.addCase(fetchSteamers.fulfilled, (state, action) => {\n      state.isLoading = false\n      state.streamers = action.payload.data\n    })\n    builder.addCase(fetchSteamers.rejected, (state, action) => {\n      state.isLoading = false\n      state.error = action.payload.error.message\n    })\n\n    builder.addCase(fetchStreamer.pending, (state) => {\n      state.isLoading = true\n    })\n    builder.addCase(fetchStreamer.fulfilled, (state, action) => {\n      state.isLoading = false\n      state.streamer = action.payload.data\n    })\n    builder.addCase(fetchStreamer.rejected, (state, action) => {\n      state.isLoading = false\n      state.error = action.payload.error.message\n    })\n\n    builder.addCase(addStreamer.pending, (state) => {\n      state.isLoading = true\n    })\n    builder.addCase(addStreamer.fulfilled, (state, action) => {\n      state.isLoading = false\n      state.streamers.push(action.payload.data);\n    })\n    builder.addCase(addStreamer.rejected, (state, action) => {\n      state.isLoading = false\n      console.log(action)\n      state.error = action.error.message\n    })\n\n    builder.addCase(voteSteamer.pending, (state) => {\n      state.isLoading = true\n    })\n    builder.addCase(voteSteamer.fulfilled, (state, action) => {\n      state.isLoading = false\n      state.streamer = action.payload.data\n      state.streamers.map(el => el._id === action.payload.data._id ? action.payload.data : el) \n    })\n    builder.addCase(voteSteamer.rejected, (state, action) => {\n      state.isLoading = false\n      state.error = action.payload.error.message\n    })\n  }\n})\n\nexport default postSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}