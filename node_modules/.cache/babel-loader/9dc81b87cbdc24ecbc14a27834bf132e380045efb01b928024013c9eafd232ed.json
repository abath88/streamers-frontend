{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\nconst initialState = {\n  streamers: [],\n  streamer: null,\n  isLoading: false,\n  error: null\n};\nconst backendURL = 'http://localhost:3001';\nexport const fetchSteamers = createAsyncThunk('streamer/fetchSteamers', async () => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  };\n  const res = await axios(`${backendURL}/api/streamers`, config);\n  const data = await res.data;\n  return data;\n});\nexport const fetchStreamer = createAsyncThunk('streamer/fetchStreamer', async _ref => {\n  let {\n    id\n  } = _ref;\n  const res = await axios(`${backendURL}/api/streamer/${id}`);\n  const data = await res.data;\n  return data;\n});\nexport const addStreamer = _s(createAsyncThunk('streamer/addStreamer', _s(async (_ref2, _ref3) => {\n  _s();\n  let {\n    name,\n    platform,\n    description\n  } = _ref2;\n  let {\n    rejectWithValue\n  } = _ref3;\n  try {\n    const token = useSelector(state => state.auth.token);\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Authorization': \"Bearer \" + token\n      }\n    };\n    const {\n      data\n    } = await axios.post(`${backendURL}/api/streamer`, {\n      name,\n      platform,\n      description\n    }, config);\n    return data;\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n}, \"bD5+gKbiITcJRDYAIJK4ZSEgato=\", false, function () {\n  return [useSelector];\n})), \"bD5+gKbiITcJRDYAIJK4ZSEgato=\", false, function () {\n  return [useSelector];\n});\nexport const voteSteamer = _s2(createAsyncThunk('streamer/vote', _s2(async (_ref4, _ref5) => {\n  _s2();\n  let {\n    id,\n    vote\n  } = _ref4;\n  let {\n    rejectWithValue\n  } = _ref5;\n  const token = useSelector(state => state.auth.token);\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Authorization': \"Bearer \" + token\n      }\n    };\n    const {\n      data\n    } = await axios.post(`${backendURL}/api/comment/${id}/vote`, {\n      vote\n    }, config);\n    return data;\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n}, \"bD5+gKbiITcJRDYAIJK4ZSEgato=\", false, function () {\n  return [useSelector];\n})), \"bD5+gKbiITcJRDYAIJK4ZSEgato=\", false, function () {\n  return [useSelector];\n});\nexport const postSlice = createSlice({\n  name: 'post',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchSteamers.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(fetchSteamers.fulfilled, (state, _ref6) => {\n      let {\n        action\n      } = _ref6;\n      state.isLoading = false;\n      state.streamers = action.payload.data;\n    });\n    builder.addCase(fetchSteamers.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.error.message;\n    });\n    builder.addCase(fetchStreamer.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(fetchStreamer.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.streamer = action.payload.data;\n    });\n    builder.addCase(fetchStreamer.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.error.message;\n    });\n    builder.addCase(addStreamer.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(addStreamer.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.streamers.push(action.payload.data);\n    });\n    builder.addCase(addStreamer.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.error.message;\n    });\n    builder.addCase(voteSteamer.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(voteSteamer.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.streamer = action.payload.data;\n      state.streamers.map(el => el._id === action.payload.data._id ? action.payload.data : el);\n    });\n    builder.addCase(voteSteamer.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.error.message;\n    });\n  }\n});\nexport default postSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","useSelector","initialState","streamers","streamer","isLoading","error","backendURL","fetchSteamers","config","headers","res","data","fetchStreamer","_ref","id","addStreamer","_s","_ref2","_ref3","name","platform","description","rejectWithValue","token","state","auth","post","response","message","voteSteamer","_s2","_ref4","_ref5","vote","postSlice","reducers","extraReducers","builder","addCase","pending","fulfilled","_ref6","action","payload","rejected","push","map","el","_id","reducer"],"sources":["/Users/albert/Desktop/frontend-steamers/src/redux/slice/streamerSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\nimport axios from 'axios'\nimport { useSelector } from 'react-redux'\n\nconst initialState = {\n  streamers: [],\n  streamer: null,\n  isLoading: false,\n  error: null,\n}\n\nconst backendURL = 'http://localhost:3001'\n\nexport const fetchSteamers = createAsyncThunk(\n  'streamer/fetchSteamers',\n  async () => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    };\n    const res = await axios(`${backendURL}/api/streamers`, config);\n    const data = await res.data;\n    return data;\n  }\n)\n\nexport const fetchStreamer = createAsyncThunk(\n  'streamer/fetchStreamer',\n  async ({ id }) => {\n    const res = await axios(`${backendURL}/api/streamer/${id}`);\n    const data = await res.data;\n    return data;\n  }\n)\n\nexport const addStreamer = createAsyncThunk(\n  'streamer/addStreamer',\n  async ({ name, platform ,description }, { rejectWithValue }) => {\n    try {\n      const token = useSelector(state => state.auth.token);\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Authorization': \"Bearer \" + token\n        },\n      };\n      const { data } = await axios.post(\n        `${backendURL}/api/streamer`,\n        { name, platform, description },\n        config\n      );\n      return data;\n    } catch (error) {\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message)\n      } else {\n        return rejectWithValue(error.message)\n      }\n    }\n  }\n)\n\nexport const voteSteamer = createAsyncThunk(\n  'streamer/vote',\n  async ({ id, vote }, { rejectWithValue }) => {\n    const token = useSelector(state => state.auth.token);\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Authorization': \"Bearer \" + token\n        },\n      };\n      const { data } = await axios.post(\n        `${backendURL}/api/comment/${id}/vote`,\n        { vote },\n        config\n      );\n      return data;\n    } catch (error) {\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message)\n      } else {\n        return rejectWithValue(error.message)\n      }\n    }\n  }\n)\n\nexport const postSlice = createSlice({\n  name: 'post',\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetchSteamers.pending, (state) => {\n      state.isLoading = true\n    })\n    builder.addCase(fetchSteamers.fulfilled, (state, {action}) => {\n      state.isLoading = false\n      state.streamers = action.payload.data\n    })\n    builder.addCase(fetchSteamers.rejected, (state, action) => {\n      state.isLoading = false\n      state.error = action.error.message\n    })\n\n    builder.addCase(fetchStreamer.pending, (state) => {\n      state.isLoading = true\n    })\n    builder.addCase(fetchStreamer.fulfilled, (state, action) => {\n      state.isLoading = false\n      state.streamer = action.payload.data\n    })\n    builder.addCase(fetchStreamer.rejected, (state, action) => {\n      state.isLoading = false\n      state.error = action.error.message\n    })\n\n    builder.addCase(addStreamer.pending, (state) => {\n      state.isLoading = true\n    })\n    builder.addCase(addStreamer.fulfilled, (state, action) => {\n      state.isLoading = false\n      state.streamers.push(action.payload.data);\n    })\n    builder.addCase(addStreamer.rejected, (state, action) => {\n      state.isLoading = false\n      state.error = action.error.message\n    })\n\n    builder.addCase(voteSteamer.pending, (state) => {\n      state.isLoading = true\n    })\n    builder.addCase(voteSteamer.fulfilled, (state, action) => {\n      state.isLoading = false\n      state.streamer = action.payload.data\n      state.streamers.map(el => el._id === action.payload.data._id ? action.payload.data : el) \n    })\n    builder.addCase(voteSteamer.rejected, (state, action) => {\n      state.isLoading = false\n      state.error = action.error.message\n    })\n  }\n})\n\nexport default postSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}