{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst backendURL = 'https://localhost:3000';\nconst initialState = {\n  loading: false,\n  username: '',\n  token: '',\n  error: null,\n  success: false\n};\nexport const userLogin = createAsyncThunk('auth/login', async (_ref, _ref2) => {\n  let {\n    username,\n    password\n  } = _ref;\n  let {\n    rejectWithValue\n  } = _ref2;\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post(`${backendURL}/api/signin`, {\n      username,\n      password\n    }, config);\n    return data;\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});\nexport const registerUser = createAsyncThunk('auth/register', async (_ref3, _ref4) => {\n  let {\n    username,\n    mail,\n    password\n  } = _ref3;\n  let {\n    rejectWithValue\n  } = _ref4;\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    await axios.post(`${backendURL}/api/signup`, {\n      username,\n      mail,\n      password\n    }, config);\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [userLogin.pending]: state => {\n      state.loading = true;\n      state.error = null;\n    },\n    [userLogin.fulfilled]: (state, _ref5) => {\n      let {\n        payload\n      } = _ref5;\n      state.loading = false;\n      state.userInfo = payload;\n      state.token = payload.data.token;\n      state.username = payload.data.username;\n    },\n    [userLogin.rejected]: (state, _ref6) => {\n      let {\n        payload\n      } = _ref6;\n      state.loading = false;\n      state.error = payload;\n      state.success = false;\n    },\n    [registerUser.pending]: state => {\n      state.loading = true;\n      state.error = null;\n    },\n    [registerUser.fulfilled]: (state, _ref7) => {\n      let {\n        payload\n      } = _ref7;\n      state.loading = false;\n      state.success = true;\n    },\n    [registerUser.rejected]: (state, _ref8) => {\n      let {\n        payload\n      } = _ref8;\n      state.loading = false;\n      state.success = false;\n      state.error = payload;\n    }\n  }\n});\nexport default authSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","backendURL","initialState","loading","username","token","error","success","userLogin","_ref","_ref2","password","rejectWithValue","config","headers","data","post","response","message","registerUser","_ref3","_ref4","mail","authSlice","name","reducers","extraReducers","pending","state","fulfilled","_ref5","payload","userInfo","rejected","_ref6","_ref7","_ref8","reducer"],"sources":["/Users/albert/Desktop/frontend-steamers/src/redux/slice/authSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\nimport axios from 'axios'\n\nconst backendURL = 'https://localhost:3000'\n\nconst initialState = {\n  loading: false,\n  username: '',\n  token: '',\n  error: null,\n  success: false,\n}\n\nexport const userLogin = createAsyncThunk(\n  'auth/login',\n  async ({ username, password }, { rejectWithValue }) => {\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      };\n      const { data } = await axios.post(\n        `${backendURL}/api/signin`,\n        { username, password },\n        config\n      );\n      return data\n    } catch (error) {\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message)\n      } else {\n        return rejectWithValue(error.message)\n      }\n    }\n  }\n)\n\nexport const registerUser = createAsyncThunk(\n  'auth/register',\n  async ({ username, mail, password }, { rejectWithValue }) => {\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n      await axios.post(\n        `${backendURL}/api/signup`,\n        { username, mail, password },\n        config\n      )\n    } catch (error) {\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message)\n      } else {\n        return rejectWithValue(error.message)\n      }\n    }\n  }\n)\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [userLogin.pending]: (state) => {\n      state.loading = true\n      state.error = null\n    },\n    [userLogin.fulfilled]: (state, { payload }) => {\n      state.loading = false\n      state.userInfo = payload\n      state.token = payload.data.token\n      state.username = payload.data.username\n    },\n    [userLogin.rejected]: (state, { payload }) => {\n      state.loading = false\n      state.error = payload\n      state.success = false\n    },\n    \n    [registerUser.pending]: (state) => {\n      state.loading = true\n      state.error = null\n    },\n    [registerUser.fulfilled]: (state, { payload }) => {\n      state.loading = false\n      state.success = true\n    },\n    [registerUser.rejected]: (state, { payload }) => {\n      state.loading = false\n      state.success = false\n      state.error = payload\n    },\n  },\n})\n\nexport default authSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}