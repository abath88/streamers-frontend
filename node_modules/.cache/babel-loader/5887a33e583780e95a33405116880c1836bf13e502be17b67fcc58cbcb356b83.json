{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst backendURL = 'http://localhost:3001';\nconst initialState = {\n  loading: false,\n  username: '',\n  token: '',\n  error: null,\n  success: false\n};\nexport const userLogin = createAsyncThunk('auth/login', async (_ref, _ref2) => {\n  let {\n    username,\n    password\n  } = _ref;\n  let {\n    rejectWithValue\n  } = _ref2;\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    };\n    const {\n      data\n    } = await axios.post(`${backendURL}/api/signin`, {\n      username,\n      password\n    }, config);\n    return data;\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});\nexport const registerUser = createAsyncThunk('auth/register', async (_ref3, _ref4) => {\n  let {\n    username,\n    mail,\n    password\n  } = _ref3;\n  let {\n    rejectWithValue\n  } = _ref4;\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    await axios.post(`${backendURL}/api/signup`, {\n      username,\n      mail,\n      password\n    }, config);\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(userLogin.pending, state => {\n      state.loading = true;\n      state.error = null;\n    });\n    builder.addCase(userLogin.fulfilled, (state, _ref5) => {\n      let {\n        payload\n      } = _ref5;\n      state.loading = false;\n      state.userInfo = payload;\n      state.token = payload.data.token;\n      state.username = payload.data.username;\n    });\n    builder.addCase(userLogin.rejected, state => {\n      state.loading = false;\n      state.error = payload;\n      state.success = false;\n    });\n    builder.addCase(registerUser.pending, state => {\n      state.loading = true;\n      state.error = null;\n    });\n    builder.addCase(registerUser.fulfilled, state => {\n      state.loading = false;\n      state.success = true;\n    });\n    builder.addCase(registerUser.rejected, (state, _ref6) => {\n      let {\n        payload\n      } = _ref6;\n      state.loading = false;\n      state.success = false;\n      state.error = payload;\n    });\n  }\n});\nexport default authSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","backendURL","initialState","loading","username","token","error","success","userLogin","_ref","_ref2","password","rejectWithValue","config","headers","data","post","response","message","registerUser","_ref3","_ref4","mail","authSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","_ref5","payload","userInfo","rejected","_ref6","reducer"],"sources":["/Users/albert/Desktop/frontend-steamers/src/redux/slice/authSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\nimport axios from 'axios'\n\nconst backendURL = 'http://localhost:3001'\n\nconst initialState = {\n  loading: false,\n  username: '',\n  token: '',\n  error: null,\n  success: false,\n}\n\nexport const userLogin = createAsyncThunk(\n  'auth/login',\n  async ({ username, password }, { rejectWithValue }) => {\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      };\n      const { data } = await axios.post(\n        `${backendURL}/api/signin`,\n        { username, password },\n        config\n      );\n      return data\n    } catch (error) {\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message)\n      } else {\n        return rejectWithValue(error.message)\n      }\n    }\n  }\n)\n\nexport const registerUser = createAsyncThunk(\n  'auth/register',\n  async ({ username, mail, password }, { rejectWithValue }) => {\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n      await axios.post(\n        `${backendURL}/api/signup`,\n        { username, mail, password },\n        config\n      )\n    } catch (error) {\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message)\n      } else {\n        return rejectWithValue(error.message)\n      }\n    }\n  }\n)\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(userLogin.pending, (state) => {\n      state.loading = true\n      state.error = null\n    })\n    builder.addCase(userLogin.fulfilled, (state, {payload}) => {\n      state.loading = false\n      state.userInfo = payload\n      state.token = payload.data.token\n      state.username = payload.data.username\n    })\n    builder.addCase(userLogin.rejected, (state) => {\n      state.loading = false\n      state.error = payload\n      state.success = false\n    })\n\n    builder.addCase(registerUser.pending, (state) => {\n      state.loading = true\n      state.error = null\n    })\n    builder.addCase(registerUser.fulfilled, (state) => {\n      state.loading = false\n      state.success = true\n    })\n    builder.addCase(registerUser.rejected, (state, {payload}) => {\n      state.loading = false\n      state.success = false\n      state.error = payload\n    })  \n  },\n})\n\nexport default authSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}